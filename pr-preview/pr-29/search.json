[{"path":"https://rmi-pacta.github.io/pacta.loanbook/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 pacta.loanbook authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_overview.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Overview","text":"cookbook provides step--step guide running PACTA Banks analysis using r2dii.* suite packages. analysis designed help banks assess alignment loan books Paris Agreement goals. sections cookbook follows: Overview: section provides overview PACTA Banks analysis main steps. Preparatory Steps: Prepare Loanbook, ABCD Scenario input data. Running Analysis: Match raw loan books ABCD data run PACTA Banks analysis. Interpretation Results: Interpret results analysis understand outputs. Advanced Topics: Learn adjust analysis parameters best results advanced research questions.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_overview.html","id":"what-is-the-pacta-for-banks-analysis","dir":"Articles","previous_headings":"Overview","what":"What is the PACTA for Banks analysis?","title":"Overview","text":"PACTA Banks based PACTA methodology, assesses alignment financial portfolios climate goals utilizing forward-looking asset-based company data (ABCD) linked financial assets compares production profiles companies technology emissions pathways climate transition scenarios sector /technology level.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_overview.html","id":"who-are-these-tools-built-for","dir":"Articles","previous_headings":"Overview","what":"Who are these tools built for?","title":"Overview","text":"PACTA Banks analysis primarily designed run banks , minimal additional guidance. However, can also useful tool user, case like run PACTA analysis loan book.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_overview.html","id":"what-can-the-results-of-the-pacta-for-banks-analysis-be-used-for","dir":"Articles","previous_headings":"Overview","what":"What can the results of the PACTA for Banks analysis be used for?","title":"Overview","text":"Banks can use results analysis assess alignment loan books Paris Agreement goals, identify sectors may need take action improve alignment, screen potential climate-related transition risks. results may additionally used identify opportunities climate-aligned investments, well detecting individual counterparties may exposed climate-related transition risks may therefore require dedicated focus risk management process. Users able obtain tabular outputs plots can used use cases. tabular output enables processing alignment results models tools, example input financial risk models, recurring input internal monitoring systems.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_overview.html","id":"what-are-the-main-steps-of-the-analysis","dir":"Articles","previous_headings":"Overview","what":"What are the main steps of the analysis?","title":"Overview","text":"main steps analysis follows: Data preparation: Prepare loan book, ABCD Scenario input data. Matching process: Match raw loan book ABCD data. Prioritization loan book: Prioritize matched loan book analyze coverage. Run PACTA Banks analysis: Run analysis generate plots. cookbook guide steps analysis detail, explain required input data sets software, provide guidance interpret results. NEXT CHAPTER: Preparatory Steps","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"preparatory-steps","dir":"Articles","previous_headings":"","what":"Preparatory Steps","title":"Preparatory Steps","text":"section provides overview preparatory steps need taken running PACTA Banks analysis. includes information required input data sets required software.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"required-input-data-sets","dir":"Articles","previous_headings":"Preparatory Steps","what":"Required Input Data Sets","title":"Preparatory Steps","text":"PACTA Banks analysis requires number input data sets run. can obtained external sources, others need prepared user. Furthermore, input data sets optional. main input data sets required analysis following:","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"asset-based-company-data-abcd","dir":"Articles","previous_headings":"Preparatory Steps > Required Input Data Sets","what":"Asset-based Company Data (ABCD)","title":"Preparatory Steps","text":"required input external source XLSX file data set provides information production profiles emission intensities companies active following real economy sectors: Automotive (light-duty vehicles) manufacturing, aviation, cement production, coal mining, upstream oil & gas extraction, power generation, steel production. ABCD typically obtained third party data providers. However, possible prepare ABCD complement external data set entries may covered box. ABCD data set must XLSX file contains following columns: company_id emission_factor emission_factor_unit is_ultimate_owner lei name_company plant_location production production_unit sector technology year PACTA data agnostic allows using data provider offers appropriate format, one option obtain ABCD analysis buy data data provider Asset Impact. information obtain ABCD PACTA documentation individual sectors data points can found Asset Impact website.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"scenario-data","dir":"Articles","previous_headings":"Preparatory Steps > Required Input Data Sets","what":"Scenario Data","title":"Preparatory Steps","text":"required input(s) external source CSV file(s) scenario data set provides information trajectories technologies/fuel types emission intensity pathways (subset ) sectors covered PACTA. sectors technology level trajectories, data set provides TMSR SMSP pathways based Market Share Approach, allocation rule implies companies active sector adjust production way keeps market shares constant solves aggregate climate transition scenario. information calculate TMSR SMSP, see PACTA Banks documentation. target market share scenario data set must CSV file contains following columns: region scenario scenario_source sector smsp technology tmsr year sectors technology level pathways, PACTA uses Sectoral Decarbonization Approach (SDA), allocation rule implies companies sector converge physical emission intensity future scenario value - e.g. year 2050. implies polluting companies reduce physical emissions intensity drastically companies using cleaner technology. direct implications amount units produced company. information calculating SDA PACTA, please see PACTA Banks documentation. SDA scenario data set must CSV file contains following columns: region scenario scenario_source sector smsp technology tmsr year raw input values scenarios based models external third party organisations - World Energy Outlook International Energy Agency (IEA), Global Energy Climate Outlook Joint Research Center European Commission (JRC), One Earth Climate Model Institute Sustainable Futures (ISF) - input data set PACTA must prepared using additional steps, documented publicly following GitHub repositories: pacta.scenario.data.preparation workflow.scenario.preparation Since RMI taken stewardship PACTA, prepared scenario files can also accessed CSV downloads “Methodology Supporting Documents” section PACTA website. files usually updated annually based latest scenario publications general rule, year publication defines initial year scenario data set. commonly also used start year analysis.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"raw-loan-book","dir":"Articles","previous_headings":"Preparatory Steps > Required Input Data Sets","what":"Raw Loan Book","title":"Preparatory Steps","text":"required input self-prepared CSV file raw loan book financial data set like analyze. contains information loans provided companies. bank, data required available internal systems. raw loan book must prepared CSV files contain minimum following columns: id_direct_loantaker id_loan id_ultimate_parent isin_direct_loantaker lei_direct_loantaker loan_size_credit_limit loan_size_credit_limit_currency loan_size_outstanding loan_size_outstanding_currency name_direct_loantaker name_ultimate_parent sector_classification_direct_loantaker sector_classification_system detailed descriptions prepare raw loan books, see “Training Materials” section PACTA Banks documentation. “User Guide 2”, “Data Dictionary”, “Loan Book Template” files can helpful preparing data.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"misclassified-loans-optional","dir":"Articles","previous_headings":"Preparatory Steps > Required Input Data Sets","what":"Misclassified Loans (optional)","title":"Preparatory Steps","text":"optional input self-prepared CSV file user can provide list loans misclassified raw loan book. aim specifically remove false positives, , loans classified scope one PACTA sectors, manual research shows companies actually operate within PACTA scope. false positive may due erroneous data entry raw loan book, example. Removing loans falsely indicated sector calculation match success rate give accurate picture match success rate can really reached.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"manual-sector-classification-optional","dir":"Articles","previous_headings":"Preparatory Steps > Required Input Data Sets","what":"Manual Sector Classification (optional)","title":"Preparatory Steps","text":"optional input self-prepared CSV file case user obtain sector classification codes classification systems featured r2dii.data::sector_classifications (currently following classification systems featured: GICS, ISIC, NACE, NAICS, PSIC, SIC), user can provide manually created sector classification file matching loan book ABCD instead. Generally, manually prepared sector classification file must follow format r2dii.data::sector_classifications. recommended use built sector classifications possible, mapping sector classification PACTA sectors can complex time consuming.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"required-software","dir":"Articles","previous_headings":"Preparatory Steps","what":"Required Software","title":"Preparatory Steps","text":"Using r2dii.* suite packages PACTA Banks analysis requires following software installed system:","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"r-version-4-1-0-or-higher","dir":"Articles","previous_headings":"Preparatory Steps > Required Software","what":"R (version 4.1.0 or higher)","title":"Preparatory Steps","text":"R programming language r2dii.* suite packages written . can download R Comprehensive R Archive Network (CRAN).","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"rstudio-optional","dir":"Articles","previous_headings":"Preparatory Steps > Required Software","what":"RStudio (optional)","title":"Preparatory Steps","text":"RStudio integrated development environment (IDE) R developed Posit. strictly required run analysis, can helpful managing project running analysis. Generally, RStudio widely used among R community probably easiest way interact R tools, r2dii.* suite packages. RStudio Desktop open source tool free charge. can download RStudio Posit RStudio website.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"r2dii--suite-of-r-packages","dir":"Articles","previous_headings":"Preparatory Steps > Required Software","what":"r2dii.* suite of R packages","title":"Preparatory Steps","text":"r2dii.* suite R packages main software tool use run PACTA Banks analysis. can install r2dii.* suite R packages CRAN mirror running following command R: can install development versions r2dii.* suite R packages GitHub : use pak package simple tool install packages GitHub.","code":"install.packages(c(\"r2dii.data\", \"r2dii.match\", \"r2dii.analysis\", \"r2dii.plot\")) # install.packages(\"pak\") pak::pak(c(\"RMI-PACTA/r2dii.data\", \"RMI-PACTA/r2dii.match\", \"RMI-PACTA/r2dii.analysis\", \"RMI-PACTA/r2dii.plot\"))"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"connecting-to-github-from-rstudio","dir":"Articles","previous_headings":"Preparatory Steps > Required Software > r2dii.* suite of R packages","what":"Connecting to GitHub from RStudio","title":"Preparatory Steps","text":"Note choose install r2dii.* suite R packages GitHub, need : registered GitHub account, git installed locally, set credentials RStudio can communicate GitHub. can find information using following resources: Happy Git GitHub useR great comprehensive resource takes process setting git GitHub RStudio, including registering GitHub account, installing git, connecting RStudio GitHub. Additional information managing GitHub connection within RStudio can found usethis package documentation, example managing git credentials. plan use GitHub install package packages shown , deep understanding git commands, need overwhelmed complexity git.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"required-r-packages","dir":"Articles","previous_headings":"Preparatory Steps > Required Software","what":"Required R packages","title":"Preparatory Steps","text":"r2dii.* suite R packages depends number R packages. dependencies installed automatically install r2dii.* suite R packages. required packages : data.table, dplyr, ggplot2, ggrepel, glue, lifecycle, magrittr, purrr, r2dii.data, rlang, scales, stringdist, stringi, stringr, tibble, tidyr, tidyselect, zoo","code":""},{"path":[]},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"how-do-i-install-the-r2dii--suite-of-r-packages","dir":"Articles","previous_headings":"Preparatory Steps > Required Software > FAQ","what":"How do I install the r2dii.* suite of R packages?","title":"Preparatory Steps","text":"common ways install R packages via CRAN GitHub. Public institutions often restrictions installation packages GitHub, may need install package CRAN. cases, institution may mirror CRAN internal application registry, may need install package . issues installation internal application registry, best reach department. obtain package ways, please reach package maintainers directly exploring options.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"how-do-i-install-the-required-r-packages","dir":"Articles","previous_headings":"Preparatory Steps > Required Software > FAQ","what":"How do I install the required R packages?","title":"Preparatory Steps","text":"principle, dependencies required run r2dii.* suite R packages installed automatically install packages. However, encounter issues installation required packages, can install manually running following command R, ... replaced package names list , separated commas:","code":"install.packages(c(...))"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_preparatory_steps.html","id":"checklist-of-preparatory-steps","dir":"Articles","previous_headings":"Preparatory Steps","what":"Checklist of Preparatory Steps","title":"Preparatory Steps","text":"running PACTA Banks analysis, make sure completed following preparatory steps: Asset-based Company Data (ABCD) Scenario Data Raw Loan Book Misclassified Loans Manual Sector Classification R (version 4.1.0 higher) RStudio (optional) r2dii.* suite R packages set git GitHub (optional) PREVIOUS CHAPTER: Overview NEXT CHAPTER: Running Analysis","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_running_the_analysis.html","id":"setup","dir":"Articles","previous_headings":"","what":"Setup","title":"Running the Analysis","text":"use r2dii.* suite packages access important functions ’ll learn . also use example datasets package r2dii.data, optional convenient functions packages dplyr readxl.","code":"library(r2dii.match) library(r2dii.analysis) library(r2dii.plot) library(r2dii.data) library(dplyr, warn.conflicts = FALSE) library(readxl)"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_running_the_analysis.html","id":"import-data","dir":"Articles","previous_headings":"","what":"Import data","title":"Running the Analysis","text":"need two datasets begin: loanbook asset-based company dataset (abcd). simulate data files prepared, use demo data included r2dii.data package create example XLS files using writexl package. Typically, data files stored XLS files computer. example, imported code using readxl package, however, use custom data strictly follow format defined previous section, may need adjust import code /data manipulation R importing.","code":"library(writexl)  writexl::write_xlsx(   x = r2dii.data::loanbook_demo,   path = file.path(tempdir(), \"loanbook.xlsx\") )  writexl::write_xlsx(   x = r2dii.data::abcd_demo,   path = file.path(tempdir(), \"abcd.xlsx\") ) loanbook <- readxl::read_excel(path = file.path(tempdir(), \"loanbook.xlsx\"))  loanbook #> # A tibble: 283 × 13 #>    id_loan id_direct_loantaker name_direct_loantaker       id_ultimate_parent #>    <chr>   <chr>               <chr>                       <chr>              #>  1 L1      C294                Vitale Group                UP15               #>  2 L2      C293                Moen-Moen                   UP84               #>  3 L3      C292                Rowe-Rowe                   UP288              #>  4 L4      C299                Fadel-Fadel                 UP54               #>  5 L5      C305                Ring AG & Co. KGaA          UP104              #>  6 L6      C304                Kassulke-Kassulke           UP83               #>  7 L7      C227                Morissette Group            UP134              #>  8 L8      C303                Barone s.r.l.               UP163              #>  9 L9      C301                Werner Werner AG & Co. KGaA UP138              #> 10 L10     C302                De rosa s.r.l.              UP32               #> # ℹ 273 more rows #> # ℹ 9 more variables: name_ultimate_parent <chr>, loan_size_outstanding <dbl>, #> #   loan_size_outstanding_currency <chr>, loan_size_credit_limit <dbl>, #> #   loan_size_credit_limit_currency <chr>, sector_classification_system <chr>, #> #   sector_classification_direct_loantaker <chr>, lei_direct_loantaker <chr>, #> #   isin_direct_loantaker <lgl>  abcd <- readxl::read_excel(path = file.path(tempdir(), \"abcd.xlsx\"))  abcd #> # A tibble: 4,972 × 12 #>    company_id name_company         lei   sector technology production_unit  year #>    <chr>      <chr>                <chr> <chr>  <chr>      <chr>           <dbl> #>  1 175        Giordano, Giordano … 1850… power  hydrocap   MW               2020 #>  2 175        Giordano, Giordano … 1850… power  hydrocap   MW               2021 #>  3 175        Giordano, Giordano … 1850… power  hydrocap   MW               2022 #>  4 175        Giordano, Giordano … 1850… power  hydrocap   MW               2023 #>  5 175        Giordano, Giordano … 1850… power  hydrocap   MW               2024 #>  6 175        Giordano, Giordano … 1850… power  hydrocap   MW               2025 #>  7 526        Vitali, Vitali e Vi… 8871… cement integrate… tonnes per year  2020 #>  8 526        Vitali, Vitali e Vi… 8871… cement integrate… tonnes per year  2021 #>  9 526        Vitali, Vitali e Vi… 8871… cement integrate… tonnes per year  2022 #> 10 526        Vitali, Vitali e Vi… 8871… cement integrate… tonnes per year  2023 #> # ℹ 4,962 more rows #> # ℹ 5 more variables: production <dbl>, emission_factor <dbl>, #> #   plant_location <chr>, is_ultimate_owner <lgl>, emission_factor_unit <chr>"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_running_the_analysis.html","id":"score-the-match-precision-between-the-loanbook-and-abcd-datasets","dir":"Articles","previous_headings":"","what":"Score the match precision between the loanbook and abcd datasets","title":"Running the Analysis","text":"match_name() scores match names loanbook dataset names asset-based company dataset. names come columns name_direct_loantaker name_ultimate_parent loanbook dataset, column name_company asset-based company dataset. loan book data set, possible optionally add number name_intermediate_parent_* columns, * indicates level corporate tree direct_loantaker. raw names internally transformed applying best-practices commonly used name matching algorithms, : Remove special characters Replace language specific characters Abbreviate certain names reduce importance matching Remove corporate suffixes necessary Spell numbers increase importance similarity scored internally-transformed names loanbook names abcd. information scoring algorithm used, see stringdist::stringsim(). match_name() defaults scoring matches name strings belong sector. Using by_sector = FALSE removes limitation – increasing computation time, number potentially incorrect matches manually validate. min_score argument allows set minimum threshold score.","code":"match_name(loanbook, abcd) #> # A tibble: 326 × 22 #>    id_loan id_direct_loantaker name_direct_loantaker       id_ultimate_parent #>    <chr>   <chr>               <chr>                       <chr>              #>  1 L1      C294                Vitale Group                UP15               #>  2 L3      C292                Rowe-Rowe                   UP288              #>  3 L5      C305                Ring AG & Co. KGaA          UP104              #>  4 L6      C304                Kassulke-Kassulke           UP83               #>  5 L6      C304                Kassulke-Kassulke           UP83               #>  6 L7      C227                Morissette Group            UP134              #>  7 L7      C227                Morissette Group            UP134              #>  8 L8      C303                Barone s.r.l.               UP163              #>  9 L9      C301                Werner Werner AG & Co. KGaA UP138              #> 10 L9      C301                Werner Werner AG & Co. KGaA UP138              #> # ℹ 316 more rows #> # ℹ 18 more variables: name_ultimate_parent <chr>, loan_size_outstanding <dbl>, #> #   loan_size_outstanding_currency <chr>, loan_size_credit_limit <dbl>, #> #   loan_size_credit_limit_currency <chr>, sector_classification_system <chr>, #> #   sector_classification_direct_loantaker <chr>, lei_direct_loantaker <chr>, #> #   isin_direct_loantaker <lgl>, id_2dii <chr>, level <chr>, sector <chr>, #> #   sector_abcd <chr>, name <chr>, name_abcd <chr>, score <dbl>, … match_name(loanbook, abcd, by_sector = FALSE) %>% nrow() #> [1] 656  # Compare to match_name(loanbook, abcd, by_sector = TRUE) %>% nrow() #> [1] 326 match_name(loanbook, abcd, min_score = 0.9) %>%   pull(score) %>%   range() #> [1] 0.9007692 1.0000000"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_running_the_analysis.html","id":"maybe-overwrite-matches","dir":"Articles","previous_headings":"Score the match precision between the loanbook and abcd datasets","what":"Maybe overwrite matches","title":"Running the Analysis","text":"happy matching coverage achieved, proceed next step. Otherwise, can manually add matches, found automatically match_name(). , manually inspect abcd find company like match loanbook. match found, use excel write .csv file similar r2dii.data::overwrite_demo, : level indicates level manual match added (e.g. direct_loantaker) id_2dii id loanbook company like match (output match_name()) name abcd company like manually link sector optionally can also overwrite sector. source can used later determine manual matches came . Notice warning.","code":"matched <-   match_name(     loanbook = loanbook,     abcd = abcd,     min_score = 0.9,     overwrite = r2dii.data::overwrite_demo   ) #> Warning: You should only overwrite a sector at the level of the 'direct #> loantaker' (DL). If you overwrite a sector at the level of the 'ultimate #> parent' (UP) you consequently overwrite all children of that sector, #> which most likely is a mistake."},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_running_the_analysis.html","id":"validate-matches","dir":"Articles","previous_headings":"","what":"Validate matches","title":"Running the Analysis","text":"Write output match_name() .csv file, example using readr save CSV file: Compare, edit, save data manually: Open matched.csv spreadsheet editor (Excel, Google Sheets, etc.). Compare columns name name_abcd manually determine match valid. information can used conjunction just names ensure two entities match (sector, internal information company structure, etc.) happy match, set score value 1. Otherwise set leave score value anything 1. Save edited file , example, valid_matches.csv. Re-import edited file (validated), example using readr read CSV file: information validating matches, please see documentation prioritize().","code":"readr::write_csv(x = matched, file = file.path(tempdir(), \"matched.csv\")) valid_matches <- readr::read_csv(file = file.path(tempdir(), \"valid_matches.csv\")) #> Rows: 310 Columns: 22 #> ── Column specification ──────────────────────────────────────────────────────── #> Delimiter: \",\" #> chr (17): id_loan, id_direct_loantaker, name_direct_loantaker, id_ultimate_p... #> dbl  (3): loan_size_outstanding, loan_size_credit_limit, score #> lgl  (2): isin_direct_loantaker, borderline #>  #> ℹ Use `spec()` to retrieve the full column specification for this data. #> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message."},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_running_the_analysis.html","id":"prioritize-validated-matches-by-level","dir":"Articles","previous_headings":"","what":"Prioritize validated matches by level","title":"Running the Analysis","text":"validated dataset may multiple matches per loan. Consider case loan given “Acme Power USA”, subsidiary “Acme Power Co.”. may “Acme Power USA” “Acme Power Co.” abcd, two valid matches loan. get best match , use prioritize() – picks rows score 1 level per loan highest priority: default, highest priority refers granular match (direct_loantaker). default priority set internally via prioritize_level(). may use different priority. One way pass function priority. example, use rev() reverse default priority.","code":"some_interesting_columns <- c(\"id_2dii\", \"level\", \"score\")  prioritized_matches <-   valid_matches %>%   prioritize()  prioritized_matches %>% select(all_of(some_interesting_columns)) #> # A tibble: 175 × 3 #>    id_2dii level            score #>    <chr>   <chr>            <dbl> #>  1 DL129   direct_loantaker     1 #>  2 DL144   direct_loantaker     1 #>  3 DL270   direct_loantaker     1 #>  4 DL86    direct_loantaker     1 #>  5 DL5     direct_loantaker     1 #>  6 DL80    direct_loantaker     1 #>  7 DL150   direct_loantaker     1 #>  8 DL3     direct_loantaker     1 #>  9 DL65    direct_loantaker     1 #> 10 DL79    direct_loantaker     1 #> # ℹ 165 more rows prioritize_level(valid_matches) #> [1] \"direct_loantaker\" \"ultimate_parent\" valid_matches %>%   prioritize(priority = rev) %>%   select(all_of(some_interesting_columns)) #> # A tibble: 175 × 3 #>    id_2dii level           score #>    <chr>   <chr>           <dbl> #>  1 UP190   ultimate_parent     1 #>  2 UP101   ultimate_parent     1 #>  3 UP39    ultimate_parent     1 #>  4 UP63    ultimate_parent     1 #>  5 UP224   ultimate_parent     1 #>  6 UP132   ultimate_parent     1 #>  7 UP12    ultimate_parent     1 #>  8 UP20    ultimate_parent     1 #>  9 UP134   ultimate_parent     1 #> 10 UP127   ultimate_parent     1 #> # ℹ 165 more rows"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_running_the_analysis.html","id":"a-note-on-sector-classifications-and-the-borderline-flag","dir":"Articles","previous_headings":"","what":"A Note on Sector Classifications and the borderline Flag","title":"Running the Analysis","text":"note sector classification: Matches preferred sector loanbook matches sector abcd. loanbook sector determined internally using sector_classification_system sector_classification_direct_loantaker columns. Currently, allow couple specific values sector_classification_system: GICS, ISIC, NACE, NAICS, PSIC, SIC like use different classification system, please raise issue r2dii.data can incorporate . zoo sector classification code systems . granular, . Since currently cover particular portion supply chain (.e. production), important try match ABCD companies actually active portion supply chain. issue arises , example, company classified “power transmission” sector. perfect world, companies produce electricity, try match . practice, however, find often overlap. reason, introduced borderline flag. example , see two classification codes coming SIC classification standard: Notice code D35.11 corresponds power generation. identical match PACTA’s power sector, thus borderline flag set FALSE. contrast, code D35.14 corresponds distribution electricity. perfect world, set code scope, however still chance companies produce electricity. reason, mapped power borderline = TRUE. practice, company borderline TRUE matched, consider company scope. borderline TRUE isn’t matched, consider scope.","code":"r2dii.data::nace_classification %>%    filter(code %in% c(\"D35.11\", \"D35.14\")) #> # A tibble: 2 × 6 #>   original_code description                      code  sector borderline version #>   <chr>         <chr>                            <chr> <chr>  <lgl>      <chr>   #> 1 35.11         35.11 Production of electricity… D35.… power  FALSE      2.1     #> 2 35.14         35.14 Distribution of electrici… D35.… power  TRUE       2.1"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_running_the_analysis.html","id":"calculate-targets","dir":"Articles","previous_headings":"","what":"Calculate targets","title":"Running the Analysis","text":"can calculate scenario targets using two different approaches: Market Share Approach, Sectoral Decarbonization Approach.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_running_the_analysis.html","id":"market-share-approach","dir":"Articles","previous_headings":"Calculate targets","what":"Market Share Approach","title":"Running the Analysis","text":"Market Share Approach used calculate scenario targets production technology sector. example, can use approach set targets production electric vehicles automotive sector. approach recommended sectors granular technology scenario roadmap exists. Targets can set portfolio level: company level:","code":"# Use these datasets to practice but eventually you should use your own data. scenario <- r2dii.data::scenario_demo_2020 regions <- r2dii.data::region_isos_demo  market_share_targets_portfolio <-   target_market_share(     data = prioritized_matches,     abcd = abcd,     scenario = scenario,     region_isos = regions   )  market_share_targets_portfolio #> # A tibble: 1,076 × 10 #>    sector     technology  year region scenario_source metric     production #>    <chr>      <chr>      <dbl> <chr>  <chr>           <chr>           <dbl> #>  1 automotive electric    2020 global demo_2020       projected     139052. #>  2 automotive electric    2020 global demo_2020       target_cps    139052. #>  3 automotive electric    2020 global demo_2020       target_sds    139052. #>  4 automotive electric    2020 global demo_2020       target_sps    139052. #>  5 automotive electric    2021 global demo_2020       projected     140395. #>  6 automotive electric    2021 global demo_2020       target_cps    140195. #>  7 automotive electric    2021 global demo_2020       target_sds    145990. #>  8 automotive electric    2021 global demo_2020       target_sps    140505. #>  9 automotive electric    2022 global demo_2020       projected     141737. #> 10 automotive electric    2022 global demo_2020       target_cps    141314. #> # ℹ 1,066 more rows #> # ℹ 3 more variables: technology_share <dbl>, scope <chr>, #> #   percentage_of_initial_production_by_scope <dbl> market_share_targets_company <-   target_market_share(     data = prioritized_matches,     abcd = abcd,     scenario = scenario,     region_isos = regions,     by_company = TRUE # Output results at company-level   ) #> Warning: You've supplied `by_company = TRUE` and `weight_production = TRUE`. #> This will result in company-level results, weighted by the portfolio #> loan size, which is rarely useful. Did you mean to set one of these #> arguments to `FALSE`?  market_share_targets_company #> # A tibble: 14,505 × 11 #>    sector    technology  year region scenario_source name_abcd metric production #>    <chr>     <chr>      <dbl> <chr>  <chr>           <chr>     <chr>       <dbl> #>  1 automoti… electric    2020 global demo_2020       Bernardi… proje…      6646. #>  2 automoti… electric    2020 global demo_2020       Bernardi… targe…      6646. #>  3 automoti… electric    2020 global demo_2020       Bernardi… targe…      6646. #>  4 automoti… electric    2020 global demo_2020       Bernardi… targe…      6646. #>  5 automoti… electric    2020 global demo_2020       Christia… proje…     11894. #>  6 automoti… electric    2020 global demo_2020       Christia… targe…     11894. #>  7 automoti… electric    2020 global demo_2020       Christia… targe…     11894. #>  8 automoti… electric    2020 global demo_2020       Christia… targe…     11894. #>  9 automoti… electric    2020 global demo_2020       Donati, … proje…      5818. #> 10 automoti… electric    2020 global demo_2020       Donati, … targe…      5818. #> # ℹ 14,495 more rows #> # ℹ 3 more variables: technology_share <dbl>, scope <chr>, #> #   percentage_of_initial_production_by_scope <dbl>"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/articles/cookbook_running_the_analysis.html","id":"sectoral-decarbonization-approach","dir":"Articles","previous_headings":"Calculate targets","what":"Sectoral Decarbonization Approach","title":"Running the Analysis","text":"Sectoral Decarbonization Approach used calculate scenario targets emission_factor sector. example, can use approach set targets average emission factor cement sector. approach recommended sectors lacking technology roadmaps.","code":"# Use this dataset to practice but eventually you should use your own data. co2 <- r2dii.data::co2_intensity_scenario_demo  sda_targets <-   target_sda(     data = prioritized_matches,     abcd = abcd,     co2_intensity_scenario = co2,     region_isos = regions   ) %>%    filter(sector == \"cement\", year >= 2020) #> Warning: Removing rows in abcd where `emission_factor` is NA  sda_targets #> # A tibble: 110 × 6 #>    sector  year region             scenario_source emission_factor_metric #>    <chr>  <dbl> <chr>              <chr>           <chr>                  #>  1 cement  2020 advanced economies demo_2020       projected              #>  2 cement  2020 developing asia    demo_2020       projected              #>  3 cement  2020 global             demo_2020       projected              #>  4 cement  2021 advanced economies demo_2020       projected              #>  5 cement  2021 developing asia    demo_2020       projected              #>  6 cement  2021 global             demo_2020       projected              #>  7 cement  2022 advanced economies demo_2020       projected              #>  8 cement  2022 developing asia    demo_2020       projected              #>  9 cement  2022 global             demo_2020       projected              #> 10 cement  2023 advanced economies demo_2020       projected              #> # ℹ 100 more rows #> # ℹ 1 more variable: emission_factor_value <dbl>"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Jacob Kastl. Author, maintainer, contractor. Jackson Hoffart. Author, contractor. . Copyright holder, funder.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Kastl J, Hoffart J (2025). pacta.loanbook: Easily Install Load PACTA Banks Packages. R package version 0.0.0.9000, https://github.com/rmi-pacta/pacta.loanbook, https://rmi-pacta.github.io/pacta.loanbook/.","code":"@Manual{,   title = {pacta.loanbook: Easily Install and Load PACTA for Banks Packages},   author = {Jacob Kastl and Jackson Hoffart},   year = {2025},   note = {R package version 0.0.0.9000, https://github.com/rmi-pacta/pacta.loanbook},   url = {https://rmi-pacta.github.io/pacta.loanbook/}, }"},{"path":[]},{"path":"https://rmi-pacta.github.io/pacta.loanbook/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Easily Install and Load PACTA for Banks Packages","text":"goal pacta.loanbook provide easy way load install packages needed running PACTA Banks. also serves space provide thorough comprehensive documentation running PACTA Banks, form cookbook (ADD LINK).","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Easily Install and Load PACTA for Banks Packages","text":"can install development version pacta.loanbook GitHub :","code":"# install.packages(\"pak\") pak::pak(\"RMI-PACTA/pacta.loanbook\")"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/index.html","id":"usage-wip","dir":"","previous_headings":"","what":"Usage (WIP!)","title":"Easily Install and Load PACTA for Banks Packages","text":"library(pacta.loanbook) load core pacta.loanbook packages: r2dii.data, input data sets used PACTA Banks (e.g. sector classification systems, regional mappers, data dictionary, demo data). r2dii.match, matching counterparties raw input loan books companies asset-based company data (ABCD). r2dii.analysis, calculating alignment loan books /counterparties climate transition scenarios. r2dii.plot, plotting results alignment analysis standard PACTA plot format.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta.loanbook-package.html","id":null,"dir":"Reference","previous_headings":"","what":"pacta.loanbook: Easily Install and Load PACTA for Banks Packages — pacta.loanbook-package","title":"pacta.loanbook: Easily Install and Load PACTA for Banks Packages — pacta.loanbook-package","text":"PACTA Banks tool allows banks calculate climate alignment corporate lending portfolios. package designed make easy install load multiple PACTA Banks packages single step. also provides thorough documentation - PACTA Banks cookbook - run PACTA Banks analysis. covers prerequisites analysis, separate steps running analysis, interpretation PACTA Banks results, advanced use cases.","code":""},{"path":[]},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta.loanbook-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"pacta.loanbook: Easily Install and Load PACTA for Banks Packages — pacta.loanbook-package","text":"Maintainer: Jacob Kastl jacob.kastl@gmail.com (ORCID) [contractor] Authors: Jackson Hoffart jackson.hoffart@gmail.com (ORCID) [contractor] contributors: RMI PACTA4banks@rmi.org [copyright holder, funder]","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_conflicts.html","id":null,"dir":"Reference","previous_headings":"","what":"Conflicts between the pacta.loanbook and other packages — pacta_loanbook_conflicts","title":"Conflicts between the pacta.loanbook and other packages — pacta_loanbook_conflicts","text":"function lists conflicts packages pacta.loanbook packages loaded.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_conflicts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Conflicts between the pacta.loanbook and other packages — pacta_loanbook_conflicts","text":"","code":"pacta_loanbook_conflicts(only = NULL)"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_conflicts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Conflicts between the pacta.loanbook and other packages — pacta_loanbook_conflicts","text":"Set character vector restrict conflicts packages.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_conflicts.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Conflicts between the pacta.loanbook and other packages — pacta_loanbook_conflicts","text":"four conflicts deliberately ignored: intersect, union, setequal, setdiff dplyr. functions make base equivalents generic, negatively affect existing code.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_conflicts.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Conflicts between the pacta.loanbook and other packages — pacta_loanbook_conflicts","text":"","code":"pacta_loanbook_conflicts() #> ── Conflicts ───────────────────────────────────── pacta_loanbook_conflicts() ── #> ✖ ::() masks  #> ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_deps.html","id":null,"dir":"Reference","previous_headings":"","what":"List all pacta.loanbook dependencies — pacta_loanbook_deps","title":"List all pacta.loanbook dependencies — pacta_loanbook_deps","text":"List pacta.loanbook dependencies","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_deps.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List all pacta.loanbook dependencies — pacta_loanbook_deps","text":"","code":"pacta_loanbook_deps(recursive = FALSE, repos = getOption(\"repos\"))"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_deps.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List all pacta.loanbook dependencies — pacta_loanbook_deps","text":"recursive TRUE, also list dependencies pacta.loanbook packages. repos repositories use check updates. Defaults getOption(\"repos\").","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_logo.html","id":null,"dir":"Reference","previous_headings":"","what":"The pacta_loanbook logo, using ASCII or Unicode characters — pacta_loanbook_logo","title":"The pacta_loanbook logo, using ASCII or Unicode characters — pacta_loanbook_logo","text":"Use cli::ansi_strip() get rid colors.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_logo.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"The pacta_loanbook logo, using ASCII or Unicode characters — pacta_loanbook_logo","text":"","code":"pacta_loanbook_logo(unicode = cli::is_utf8_output())"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_logo.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"The pacta_loanbook logo, using ASCII or Unicode characters — pacta_loanbook_logo","text":"unicode Whether use Unicode symbols. Default TRUE UTF-8 platforms.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_logo.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"The pacta_loanbook logo, using ASCII or Unicode characters — pacta_loanbook_logo","text":"","code":"pacta_loanbook_logo() #>  ____    ______  ____    ______  ______      #> /\\  _`\\ /\\  _  \\/\\  _`\\ /\\__  _\\/\\  _  \\     #> \\ \\ \\L\\ \\ \\ \\L\\ \\ \\ \\/\\_\\/_/\\ \\/\\ \\ \\L\\ \\    #>  \\ \\ ,__/\\ \\  __ \\ \\ \\/_/_ \\ \\ \\ \\ \\  __ \\   #>   \\ \\ \\/  \\ \\ \\/\\ \\ \\ \\L\\ \\ \\ \\ \\ \\ \\ \\/\\ \\  #>    \\ \\_\\   \\ \\_\\ \\_\\ \\____/  \\ \\_\\ \\ \\_\\ \\_\\ #>     \\/_/    \\/_/\\/_/\\/___/    \\/_/  \\/_/\\/_/ #>"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_packages.html","id":null,"dir":"Reference","previous_headings":"","what":"List all packages in pacta.loanbook — pacta_loanbook_packages","title":"List all packages in pacta.loanbook — pacta_loanbook_packages","text":"List packages pacta.loanbook","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_packages.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List all packages in pacta.loanbook — pacta_loanbook_packages","text":"","code":"pacta_loanbook_packages(include_self = TRUE)"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_packages.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List all packages in pacta.loanbook — pacta_loanbook_packages","text":"include_self Include pacta.loanbook list?","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_packages.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List all packages in pacta.loanbook — pacta_loanbook_packages","text":"","code":"pacta_loanbook_packages() #>  [1] \"cli\"            \"dplyr\"          \"magrittr\"       \"purrr\"          #>  [5] \"r2dii.analysis\" \"r2dii.data\"     \"r2dii.match\"    \"r2dii.plot\"     #>  [9] \"rlang\"          \"rstudioapi\"     \"tibble\"         \"pacta.loanbook\""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_sitrep.html","id":null,"dir":"Reference","previous_headings":"","what":"Get a situation report on pacta.loanbook — pacta_loanbook_sitrep","title":"Get a situation report on pacta.loanbook — pacta_loanbook_sitrep","text":"function gives quick overview versions R RStudio well pacta.loanbook packages. primarily designed help get quick idea going helping someone else debug problem.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_sitrep.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get a situation report on pacta.loanbook — pacta_loanbook_sitrep","text":"","code":"pacta_loanbook_sitrep()"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_update.html","id":null,"dir":"Reference","previous_headings":"","what":"Update pacta.loanbook packages — pacta_loanbook_update","title":"Update pacta.loanbook packages — pacta_loanbook_update","text":"check see pacta.loanbook packages (optionally, dependencies) --date, install interactive confirmation.","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_update.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Update pacta.loanbook packages — pacta_loanbook_update","text":"","code":"pacta_loanbook_update(recursive = FALSE, repos = getOption(\"repos\"))"},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_update.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Update pacta.loanbook packages — pacta_loanbook_update","text":"recursive TRUE, also list dependencies pacta.loanbook packages. repos repositories use check updates. Defaults getOption(\"repos\").","code":""},{"path":"https://rmi-pacta.github.io/pacta.loanbook/reference/pacta_loanbook_update.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Update pacta.loanbook packages — pacta_loanbook_update","text":"","code":"if (FALSE) { # \\dontrun{ pacta_loanbook_update() } # }"}]
